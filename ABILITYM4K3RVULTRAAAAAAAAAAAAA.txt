local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

local bottomAbilities = PlayerGui:WaitForChild("InGameUI"):WaitForChild("Bottom"):WaitForChild("Abilities")
local templateButton = bottomAbilities:FindFirstChild("1")

local function createAbilityButton(name, key, label, layoutOrder)
	local btn = templateButton:Clone()
	btn.Name = name
	btn.Parent = bottomAbilities
	btn.LayoutOrder = layoutOrder
	btn.Keybind.Text = key
	btn.Timer.Text = label
	btn.ActualTimer.Text = ""
	if btn:FindFirstChild("Cooldown") then
		btn.Cooldown:Destroy()
	end
	return btn
end

local screenGui = Instance.new("ScreenGui", PlayerGui)
screenGui.Name = "ABILITYM4K3RV"
screenGui.ResetOnSpawn = false

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 280, 0, 190)
frame.Position = UDim2.new(0.7, 0, 0.2, 0)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local outline = Instance.new("UIStroke")
outline.Thickness = 2
outline.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
outline.Parent = frame

task.spawn(function()
	local hue = 0
	while true do
		hue = (hue + 1) % 360
		outline.Color = Color3.fromHSV(hue / 360, 1, 1)
		RunService.RenderStepped:Wait()
	end
end)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "ABILITYM4K3RV"
title.TextColor3 = Color3.new(1, 1, 1)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 18

local nameBox = Instance.new("TextBox", frame)
nameBox.PlaceholderText = "Ability Name"
nameBox.Size = UDim2.new(1, -20, 0, 30)
nameBox.Position = UDim2.new(0, 10, 0, 40)
nameBox.Font = Enum.Font.Gotham
nameBox.TextSize = 14
nameBox.Text = ""
nameBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
nameBox.BorderSizePixel = 0
nameBox.TextColor3 = Color3.new(1, 1, 1)

local keyBox = Instance.new("TextBox", frame)
keyBox.PlaceholderText = "Keybind (ex: F)"
keyBox.Size = UDim2.new(1, -20, 0, 30)
keyBox.Position = UDim2.new(0, 10, 0, 80)
keyBox.Font = Enum.Font.Gotham
keyBox.TextSize = 14
keyBox.Text = ""
keyBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
keyBox.BorderSizePixel = 0
keyBox.TextColor3 = Color3.new(1, 1, 1)

local layoutCount = 10
local keyConnections = {}
local log = {}
local lockActive = false

local lockButton = Instance.new("TextButton", frame)
lockButton.Text = "Lock"
lockButton.Size = UDim2.new(0.3, -10, 0, 30)
lockButton.Position = UDim2.new(0, 10, 0, 120)
lockButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
lockButton.TextColor3 = Color3.new(1, 1, 1)
lockButton.Font = Enum.Font.GothamBold
lockButton.TextSize = 14
lockButton.BorderSizePixel = 0

lockButton.MouseButton1Click:Connect(function()
	lockActive = not lockActive
	lockButton.Text = lockActive and "Locked" or "Lock"
end)

local executeButton = Instance.new("TextButton", frame)
executeButton.Text = "Execute"
executeButton.Size = UDim2.new(0.3, -10, 0, 30)
executeButton.Position = UDim2.new(0.35, 5, 0, 120)
executeButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
executeButton.TextColor3 = Color3.new(1, 1, 1)
executeButton.Font = Enum.Font.GothamBold
executeButton.TextSize = 14
executeButton.BorderSizePixel = 0

executeButton.MouseButton1Click:Connect(function()
	local name = nameBox.Text
	local key = keyBox.Text:upper()
	if name == "" or key == "" then return end

	local newBtn = createAbilityButton(name.."Btn", key, name, layoutCount)
	layoutCount += 1

	newBtn.MouseButton1Click:Connect(function()
		print("Ability triggered:", name)
	end)

	local conn = UserInputService.InputBegan:Connect(function(input, gp)
		if gp then return end
		if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode.Name == key then
			print("Ability triggered via key:", name)
		end
	end)
	table.insert(keyConnections, conn)

	if lockActive then
		table.insert(log, {Name = name, Key = key})
	elseif not table.find(log, {Name = name, Key = key}) then
		table.insert(log, {Name = name, Key = key})
	end
end)

local copyButton = Instance.new("TextButton", frame)
copyButton.Text = "Copy Code"
copyButton.Size = UDim2.new(0.3, -10, 0, 30)
copyButton.Position = UDim2.new(0.7, 0, 0, 120)
copyButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
copyButton.TextColor3 = Color3.new(1, 1, 1)
copyButton.Font = Enum.Font.GothamBold
copyButton.TextSize = 14
copyButton.BorderSizePixel = 0

copyButton.MouseButton1Click:Connect(function()
	if #log == 0 then return end

	local code = "-- Script Generated by ABILITYM4K3RV | Made by: TakeChances\n\n"
	code ..= "local Players = game:GetService(\"Players\")\n"
	code ..= "local UserInputService = game:GetService(\"UserInputService\")\n"
	code ..= "local player = Players.LocalPlayer\n"
	code ..= "local PlayerGui = player:WaitForChild(\"PlayerGui\")\n\n"
	code ..= "local bottomAbilities = PlayerGui:WaitForChild(\"InGameUI\"):WaitForChild(\"Bottom\"):WaitForChild(\"Abilities\")\n"
	code ..= "local templateButton = bottomAbilities:FindFirstChild(\"1\")\n\n"
	code ..= "local function createAbilityButton(name, key, label, layoutOrder)\n"
	code ..= "\tlocal btn = templateButton:Clone()\n"
	code ..= "\tbtn.Name = name\n"
	code ..= "\tbtn.Parent = bottomAbilities\n"
	code ..= "\tbtn.LayoutOrder = layoutOrder\n"
	code ..= "\tbtn.Keybind.Text = key\n"
	code ..= "\tbtn.Timer.Text = label\n"
	code ..= "\tbtn.ActualTimer.Text = \"\"\n"
	code ..= "\tif btn:FindFirstChild(\"Cooldown\") then btn.Cooldown:Destroy() end\n"
	code ..= "\treturn btn\nend\n\n"
	code ..= "local layoutCount = 10\n\n"

	for _, entry in pairs(log) do
		code ..= string.format("do\n\tlocal name = \"%s\"\n\tlocal key = \"%s\"\n", entry.Name, entry.Key)
		code ..= string.format("\tlocal newBtn = createAbilityButton(name..\"Btn\", key, name, layoutCount)\n")
		code ..= "\tlayoutCount += 1\n"
		code ..= "\tnewBtn.MouseButton1Click:Connect(function()\n"
		code ..= "\t\tprint(\"Ability triggered:\", name)\n\tend)\n"
		code ..= "\tUserInputService.InputBegan:Connect(function(input, gp)\n"
		code ..= "\t\tif gp then return end\n"
		code ..= "\t\tif input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode.Name == key then\n"
		code ..= "\t\t\tprint(\"Ability triggered via key:\", name)\n\t\tend\n\tend)\n"
		code ..= "end\n\n"
	end

	setclipboard(code)

	local latest = log[#log]
	StarterGui:SetCore("SendNotification", {
		Title = "Copied!";
		Text = "Style: " .. latest.Name .. "\nKeybind: " .. latest.Key;
		Icon = "rbxthumb://type=Asset&id=128161971773351&w=150&h=150";
		Duration = 5;
	})
end)

local comingSoon = Instance.new("TextLabel", frame)
comingSoon.Text = "More stuff coming soon..."
comingSoon.TextTransparency = 0.5
comingSoon.TextColor3 = Color3.new(1, 1, 1)
comingSoon.BackgroundTransparency = 1
comingSoon.Position = UDim2.new(0, 0, 1, -30)
comingSoon.Size = UDim2.new(1, 0, 0, 30)
comingSoon.Font = Enum.Font.GothamItalic
comingSoon.TextSize = 14
